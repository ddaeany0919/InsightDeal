Index: app/src/main/java/com/ddaeany0919/insightdeal/AdvancedSearchScreen.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.ddaeany0919.insightdeal\r\n\r\nimport androidx.compose.animation.*\r\nimport androidx.compose.foundation.background\r\nimport androidx.compose.foundation.clickable\r\nimport androidx.compose.foundation.layout.*\r\nimport androidx.compose.foundation.lazy.LazyColumn\r\nimport androidx.compose.foundation.lazy.LazyRow\r\nimport androidx.compose.foundation.lazy.items\r\nimport androidx.compose.foundation.shape.RoundedCornerShape\r\nimport androidx.compose.foundation.text.KeyboardActions\r\nimport androidx.compose.foundation.text.KeyboardOptions\r\nimport androidx.compose.material.icons.Icons\r\nimport androidx.compose.material.icons.filled.*\r\nimport androidx.compose.material3.*\r\nimport androidx.compose.runtime.*\r\nimport androidx.compose.ui.Alignment\r\nimport androidx.compose.ui.Modifier\r\nimport androidx.compose.ui.draw.clip\r\nimport androidx.compose.ui.focus.FocusRequester\r\nimport androidx.compose.ui.focus.focusRequester\r\nimport androidx.compose.ui.graphics.Color\r\nimport androidx.compose.ui.platform.LocalSoftwareKeyboardController\r\nimport androidx.compose.ui.text.font.FontWeight\r\nimport androidx.compose.ui.text.input.ImeAction\r\nimport androidx.compose.ui.text.style.TextAlign\r\nimport androidx.compose.ui.unit.dp\r\nimport androidx.compose.ui.unit.sp\r\nimport androidx.lifecycle.viewmodel.compose.viewModel\r\nimport coil.compose.AsyncImage\r\nimport java.text.NumberFormat\r\nimport com.ddaeany0919.insightdeal.models.DealItem\r\n\r\n@OptIn(ExperimentalMaterial3Api::class)\r\n@Composable\r\nfun AdvancedSearchScreen(\r\n    onDealClick: (DealItem) -> Unit,\r\n    onBackClick: () -> Unit,\r\n    viewModel: AdvancedSearchViewModel = viewModel()\r\n) {\r\n    val searchQuery by viewModel.searchQuery.collectAsState()\r\n    val searchResults by viewModel.searchResults.collectAsState()\r\n    val searchSuggestions by viewModel.searchSuggestions.collectAsState()\r\n    val activeFilters by viewModel.activeFilters.collectAsState()\r\n    val popularKeywords by viewModel.popularKeywords.collectAsState()\r\n    val isLoading by viewModel.isLoading.collectAsState()\r\n    \r\n    var showFilters by remember { mutableStateOf(false) }\r\n    val focusRequester = remember { FocusRequester() }\r\n    val keyboardController = LocalSoftwareKeyboardController.current\r\n    \r\n    LaunchedEffect(Unit) {\r\n        viewModel.loadPopularKeywords()\r\n        focusRequester.requestFocus()\r\n    }\r\n    \r\n    Scaffold(\r\n        topBar = {\r\n            TopAppBar(\r\n                title = {\r\n                    Text(\r\n                        text = \"ìŠ¤ë§ˆíŠ¸ ê²€ìƒ‰\",\r\n                        fontWeight = FontWeight.Bold\r\n                    )\r\n                },\r\n                navigationIcon = {\r\n                    IconButton(onClick = onBackClick) {\r\n                        Icon(Icons.Default.ArrowBack, contentDescription = \"ë’¤ë¡œê°€ê¸°\")\r\n                    }\r\n                },\r\n                actions = {\r\n                    IconButton(\r\n                        onClick = { showFilters = !showFilters }\r\n                    ) {\r\n                        Badge(\r\n                            modifier = if (activeFilters.isNotEmpty()) Modifier else Modifier.size(0.dp)\r\n                        ) {\r\n                            Text(\"${activeFilters.size}\")\r\n                        }\r\n                        Icon(\r\n                            Icons.Default.FilterList,\r\n                            contentDescription = \"í•„í„°\",\r\n                            tint = if (showFilters) MaterialTheme.colorScheme.primary \r\n                                  else MaterialTheme.colorScheme.onSurface\r\n                        )\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    ) { paddingValues ->\r\n        Column(\r\n            modifier = Modifier\r\n                .fillMaxSize()\r\n                .padding(paddingValues)\r\n        ) {\r\n            // \uD83D\uDD0D ê²€ìƒ‰ ì…ë ¥ ì˜ì—­\r\n            SearchInputSection(\r\n                searchQuery = searchQuery,\r\n                onQueryChange = viewModel::onSearchQueryChanged,\r\n                suggestions = searchSuggestions,\r\n                onSuggestionClick = viewModel::selectSuggestion,\r\n                onSearch = {\r\n                    viewModel.performSearch()\r\n                    keyboardController?.hide()\r\n                },\r\n                focusRequester = focusRequester\r\n            )\r\n            \r\n            // \uD83C\uDFAF í•„í„° ì˜ì—­ (ì ‘ì„ ìˆ˜ ìˆìŒ)\r\n            AnimatedVisibility(\r\n                visible = showFilters,\r\n                enter = slideInVertically() + expandVertically(),\r\n                exit = slideOutVertically() + shrinkVertically()\r\n            ) {\r\n                FilterSection(\r\n                    activeFilters = activeFilters,\r\n                    onFilterToggle = viewModel::toggleFilter,\r\n                    onClearFilters = viewModel::clearAllFilters\r\n                )\r\n            }\r\n            \r\n            // \uD83D\uDD25 ì¸ê¸° ê²€ìƒ‰ì–´ (ê²€ìƒ‰ì–´ ì—†ì„ ë•Œë§Œ í‘œì‹œ)\r\n            if (searchQuery.isEmpty() && searchResults.isEmpty()) {\r\n                PopularKeywordsSection(\r\n                    keywords = popularKeywords,\r\n                    onKeywordClick = viewModel::selectSuggestion\r\n                )\r\n            }\r\n            \r\n            // \uD83D\uDCF1 ê²€ìƒ‰ ê²°ê³¼ ì˜ì—­\r\n            when {\r\n                isLoading -> {\r\n                    Box(\r\n                        modifier = Modifier.fillMaxSize(),\r\n                        contentAlignment = Alignment.Center\r\n                    ) {\r\n                        Column(\r\n                            horizontalAlignment = Alignment.CenterHorizontally\r\n                        ) {\r\n                            CircularProgressIndicator(\r\n                                color = MaterialTheme.colorScheme.primary\r\n                            )\r\n                            \r\n                            Spacer(modifier = Modifier.height(16.dp))\r\n                            \r\n                            Text(\r\n                                text = \"\uD83D\uDD0D ê²€ìƒ‰ ì¤‘...\",\r\n                                fontSize = 16.sp,\r\n                                color = MaterialTheme.colorScheme.onSurfaceVariant\r\n                            )\r\n                        }\r\n                    }\r\n                }\r\n                \r\n                searchResults.isEmpty() && searchQuery.isNotEmpty() -> {\r\n                    SearchEmptyState(searchQuery)\r\n                }\r\n                \r\n                else -> {\r\n                    SearchResultsList(\r\n                        results = searchResults,\r\n                        onDealClick = onDealClick,\r\n                        query = searchQuery\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun SearchInputSection(\r\n    searchQuery: String,\r\n    onQueryChange: (String) -> Unit,\r\n    suggestions: List<String>,\r\n    onSuggestionClick: (String) -> Unit,\r\n    onSearch: () -> Unit,\r\n    focusRequester: FocusRequester\r\n) {\r\n    Column(\r\n        modifier = Modifier.padding(16.dp)\r\n    ) {\r\n        OutlinedTextField(\r\n            value = searchQuery,\r\n            onValueChange = onQueryChange,\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .focusRequester(focusRequester),\r\n            placeholder = {\r\n                Text(\r\n                    text = \"\uD83D\uDD0D ìƒí’ˆëª…, ë¸Œëœë“œ, ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰...\",\r\n                    color = MaterialTheme.colorScheme.onSurfaceVariant\r\n                )\r\n            },\r\n            leadingIcon = {\r\n                Icon(\r\n                    Icons.Default.Search,\r\n                    contentDescription = \"ê²€ìƒ‰\",\r\n                    tint = MaterialTheme.colorScheme.primary\r\n                )\r\n            },\r\n            trailingIcon = {\r\n                if (searchQuery.isNotEmpty()) {\r\n                    IconButton(onClick = { onQueryChange(\"\") }) {\r\n                        Icon(\r\n                            Icons.Default.Clear,\r\n                            contentDescription = \"ì§€ìš°ê¸°\"\r\n                        )\r\n                    }\r\n                }\r\n            },\r\n            keyboardOptions = KeyboardOptions(\r\n                imeAction = ImeAction.Search\r\n            ),\r\n            keyboardActions = KeyboardActions(\r\n                onSearch = { onSearch() }\r\n            ),\r\n            singleLine = true,\r\n            shape = RoundedCornerShape(12.dp)\r\n        )\r\n        \r\n        // \uD83D\uDCA1 ê²€ìƒ‰ ìë™ì™„ì„± (ë“œë¡­ë‹¤ìš´)\r\n        AnimatedVisibility(\r\n            visible = suggestions.isNotEmpty() && searchQuery.isNotEmpty(),\r\n            enter = fadeIn() + expandVertically(),\r\n            exit = fadeOut() + shrinkVertically()\r\n        ) {\r\n            Card(\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(top = 4.dp),\r\n                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)\r\n            ) {\r\n                LazyColumn(\r\n                    modifier = Modifier.heightIn(max = 200.dp)\r\n                ) {\r\n                    items(suggestions.take(5)) { suggestion ->\r\n                        SuggestionItem(\r\n                            suggestion = suggestion,\r\n                            query = searchQuery,\r\n                            onClick = { onSuggestionClick(suggestion) }\r\n                        )\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun SuggestionItem(\r\n    suggestion: String,\r\n    query: String,\r\n    onClick: () -> Unit\r\n) {\r\n    Row(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable { onClick() }\r\n            .padding(horizontal = 16.dp, vertical = 12.dp),\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            Icons.Default.Search,\r\n            contentDescription = null,\r\n            modifier = Modifier.size(18.dp),\r\n            tint = MaterialTheme.colorScheme.onSurfaceVariant\r\n        )\r\n        \r\n        Spacer(modifier = Modifier.width(12.dp))\r\n        \r\n        // ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ…\r\n        Text(\r\n            text = suggestion,\r\n            fontSize = 14.sp,\r\n            modifier = Modifier.weight(1f)\r\n        )\r\n        \r\n        Icon(\r\n            Icons.Default.NorthWest,\r\n            contentDescription = null,\r\n            modifier = Modifier.size(16.dp),\r\n            tint = MaterialTheme.colorScheme.onSurfaceVariant\r\n        )\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun FilterSection(\r\n    activeFilters: Map<String, Set<String>>,\r\n    onFilterToggle: (String, String) -> Unit,\r\n    onClearFilters: () -> Unit\r\n) {\r\n    Card(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .padding(horizontal = 16.dp),\r\n        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)\r\n    ) {\r\n        Column(\r\n            modifier = Modifier.padding(16.dp)\r\n        ) {\r\n            Row(\r\n                modifier = Modifier.fillMaxWidth(),\r\n                horizontalArrangement = Arrangement.SpaceBetween,\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Text(\r\n                    text = \"\uD83C\uDFAF ìƒì„¸ í•„í„°\",\r\n                    fontSize = 16.sp,\r\n                    fontWeight = FontWeight.Bold\r\n                )\r\n                \r\n                if (activeFilters.values.any { it.isNotEmpty() }) {\r\n                    TextButton(onClick = onClearFilters) {\r\n                        Text(\"ì „ì²´ í•´ì œ\")\r\n                    }\r\n                }\r\n            }\r\n            \r\n            Spacer(modifier = Modifier.height(12.dp))\r\n            \r\n            // ê°€ê²©ëŒ€ í•„í„°\r\n            FilterGroup(\r\n                title = \"\uD83D\uDCB0 ê°€ê²©ëŒ€\",\r\n                options = listOf(\"5ë§Œì› ì´í•˜\", \"5-15ë§Œì›\", \"15-50ë§Œì›\", \"50-100ë§Œì›\", \"100ë§Œì› ì´ìƒ\"),\r\n                selectedOptions = activeFilters[\"price\"] ?: emptySet(),\r\n                onToggle = { option -> onFilterToggle(\"price\", option) }\r\n            )\r\n            \r\n            Spacer(modifier = Modifier.height(16.dp))\r\n            \r\n            // í• ì¸ìœ¨ í•„í„°  \r\n            FilterGroup(\r\n                title = \"\uD83D\uDD25 í• ì¸ìœ¨\",\r\n                options = listOf(\"30% ì´ìƒ\", \"50% ì´ìƒ\", \"70% ì´ìƒ\"),\r\n                selectedOptions = activeFilters[\"discount\"] ?: emptySet(),\r\n                onToggle = { option -> onFilterToggle(\"discount\", option) }\r\n            )\r\n            \r\n            Spacer(modifier = Modifier.height(16.dp))\r\n            \r\n            // ì¹´í…Œê³ ë¦¬ í•„í„°\r\n            FilterGroup(\r\n                title = \"\uD83D\uDCF1 ì¹´í…Œê³ ë¦¬\",\r\n                options = listOf(\"IT\", \"íŒ¨ì…˜\", \"ìƒí™œ\", \"ì‹í’ˆ\", \"í•´ì™¸ì§êµ¬\", \"ìŠ¤í¬ì¸ \"),\r\n                selectedOptions = activeFilters[\"category\"] ?: emptySet(),\r\n                onToggle = { option -> onFilterToggle(\"category\", option) }\r\n            )\r\n            \r\n            Spacer(modifier = Modifier.height(16.dp))\r\n            \r\n            // ì‚¬ì´íŠ¸ í•„í„° (ìš°ì„ ìˆœìœ„ ë°˜ì˜)\r\n            FilterGroup(\r\n                title = \"\uD83C\uDF10 ì»¤ë®¤ë‹ˆí‹°\",\r\n                options = listOf(\"ë½ë¿Œ\", \"ì—í¨ì½”ë¦¬ì•„\", \"ë¹ ì‚­\", \"ë£¨ë¦¬ì›¹\", \"í´ë¦¬ì•™\", \"í€˜ì´ì‚¬ì¡´\"),\r\n                selectedOptions = activeFilters[\"site\"] ?: emptySet(),\r\n                onToggle = { option -> onFilterToggle(\"site\", option) }\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun FilterGroup(\r\n    title: String,\r\n    options: List<String>,\r\n    selectedOptions: Set<String>,\r\n    onToggle: (String) -> Unit\r\n) {\r\n    Column {\r\n        Text(\r\n            text = title,\r\n            fontSize = 14.sp,\r\n            fontWeight = FontWeight.Medium,\r\n            modifier = Modifier.padding(bottom = 8.dp)\r\n        )\r\n        \r\n        LazyRow(\r\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\r\n        ) {\r\n            items(options) { option ->\r\n                FilterChip(\r\n                    onClick = { onToggle(option) },\r\n                    label = { Text(option) },\r\n                    selected = option in selectedOptions,\r\n                    colors = FilterChipDefaults.filterChipColors(\r\n                        selectedContainerColor = MaterialTheme.colorScheme.primary,\r\n                        selectedLabelColor = MaterialTheme.colorScheme.onPrimary\r\n                    )\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun PopularKeywordsSection(\r\n    keywords: List<String>,\r\n    onKeywordClick: (String) -> Unit\r\n) {\r\n    Column(\r\n        modifier = Modifier.padding(16.dp)\r\n    ) {\r\n        Row(\r\n            verticalAlignment = Alignment.CenterVertically,\r\n            modifier = Modifier.padding(bottom = 12.dp)\r\n        ) {\r\n            Icon(\r\n                Icons.Default.TrendingUp,\r\n                contentDescription = null,\r\n                modifier = Modifier.size(20.dp),\r\n                tint = MaterialTheme.colorScheme.primary\r\n            )\r\n            \r\n            Spacer(modifier = Modifier.width(8.dp))\r\n            \r\n            Text(\r\n                text = \"\uD83D\uDD25 ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´\",\r\n                fontSize = 16.sp,\r\n                fontWeight = FontWeight.Bold\r\n            )\r\n        }\r\n        \r\n        LazyRow(\r\n            horizontalArrangement = Arrangement.spacedBy(8.dp)\r\n        ) {\r\n            items(keywords.take(10)) { keyword ->\r\n                AssistChip(\r\n                    onClick = { onKeywordClick(keyword) },\r\n                    label = { Text(keyword) },\r\n                    leadingIcon = {\r\n                        Icon(\r\n                            Icons.Default.Search,\r\n                            contentDescription = null,\r\n                            modifier = Modifier.size(16.dp)\r\n                        )\r\n                    }\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun SearchResultsList(\r\n    results: List<DealItem>,\r\n    onDealClick: (DealItem) -> Unit,\r\n    query: String\r\n) {\r\n    LazyColumn(\r\n        modifier = Modifier.fillMaxSize(),\r\n        verticalArrangement = Arrangement.spacedBy(8.dp),\r\n        contentPadding = PaddingValues(16.dp)\r\n    ) {\r\n        item {\r\n            // ê²€ìƒ‰ ê²°ê³¼ í†µê³„\r\n            Row(\r\n                modifier = Modifier.fillMaxWidth(),\r\n                horizontalArrangement = Arrangement.SpaceBetween,\r\n                verticalAlignment = Alignment.CenterVertically\r\n            ) {\r\n                Text(\r\n                    text = \"\uD83D\uDD0D ê²€ìƒ‰ ê²°ê³¼ ${results.size}ê°œ\",\r\n                    fontSize = 16.sp,\r\n                    fontWeight = FontWeight.Medium\r\n                )\r\n                \r\n                // ì •ë ¬ ì˜µì…˜\r\n                var showSortMenu by remember { mutableStateOf(false) }\r\n                \r\n                TextButton(\r\n                    onClick = { showSortMenu = true }\r\n                ) {\r\n                    Text(\"ì •ë ¬\")\r\n                    Icon(\r\n                        Icons.Default.ArrowDropDown,\r\n                        contentDescription = null,\r\n                        modifier = Modifier.size(16.dp)\r\n                    )\r\n                }\r\n                \r\n                DropdownMenu(\r\n                    expanded = showSortMenu,\r\n                    onDismissRequest = { showSortMenu = false }\r\n                ) {\r\n                    DropdownMenuItem(\r\n                        text = { Text(\"ìµœì‹ ìˆœ\") },\r\n                        onClick = { \r\n                            // viewModel.setSortOrder(SortOrder.LATEST)\r\n                            showSortMenu = false \r\n                        }\r\n                    )\r\n                    DropdownMenuItem(\r\n                        text = { Text(\"ì¸ê¸°ìˆœ\") },\r\n                        onClick = { \r\n                            // viewModel.setSortOrder(SortOrder.POPULAR)\r\n                            showSortMenu = false \r\n                        }\r\n                    )\r\n                    DropdownMenuItem(\r\n                        text = { Text(\"í• ì¸ìœ¨ìˆœ\") },\r\n                        onClick = { \r\n                            // viewModel.setSortOrder(SortOrder.DISCOUNT)\r\n                            showSortMenu = false \r\n                        }\r\n                    )\r\n                }\r\n            }\r\n        }\r\n        \r\n        items(results) { deal ->\r\n            SearchResultItem(\r\n                deal = deal,\r\n                onClick = { onDealClick(deal) },\r\n                query = query\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun SearchResultItem(\r\n    deal: DealItem,\r\n    onClick: () -> Unit,\r\n    query: String\r\n) {\r\n    Card(\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .clickable { onClick() },\r\n        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)\r\n    ) {\r\n        Row(\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .padding(12.dp),\r\n            verticalAlignment = Alignment.CenterVertically\r\n        ) {\r\n            // ìƒí’ˆ ì´ë¯¸ì§€\r\n            AsyncImage(\r\n                model = deal.imageUrl,\r\n                contentDescription = deal.title,\r\n                modifier = Modifier\r\n                    .size(60.dp)\r\n                    .clip(RoundedCornerShape(8.dp))\r\n                    .background(MaterialTheme.colorScheme.surfaceVariant)\r\n            )\r\n            \r\n            Spacer(modifier = Modifier.width(12.dp))\r\n            \r\n            // ìƒí’ˆ ì •ë³´\r\n            Column(\r\n                modifier = Modifier.weight(1f)\r\n            ) {\r\n                // ì‚¬ì´íŠ¸ëª… + ê¿€ë”œ ì§€ìˆ˜\r\n                Row(\r\n                    modifier = Modifier.fillMaxWidth(),\r\n                    horizontalArrangement = Arrangement.SpaceBetween,\r\n                    verticalAlignment = Alignment.CenterVertically\r\n                ) {\r\n                    Text(\r\n                        text = \"[${deal.siteName}]\",\r\n                        fontSize = 12.sp,\r\n                        color = MaterialTheme.colorScheme.primary,\r\n                        fontWeight = FontWeight.Medium\r\n                    )\r\n                    \r\n                    InlineScoreBadge(score = 85) // ì‹¤ì œë¡œëŠ” deal.qualityScore\r\n                }\r\n                \r\n                Spacer(modifier = Modifier.height(4.dp))\r\n                \r\n                // ìƒí’ˆëª… (í‚¤ì›Œë“œ í•˜ì´ë¼ì´íŒ…)\r\n                Text(\r\n                    text = deal.title,\r\n                    fontSize = 14.sp,\r\n                    fontWeight = FontWeight.Medium,\r\n                    maxLines = 2\r\n                )\r\n                \r\n                Spacer(modifier = Modifier.height(4.dp))\r\n                \r\n                // ê°€ê²© ì •ë³´\r\n                Text(\r\n                    text = \"${NumberFormat.getInstance().format(deal.price)}ì›\",\r\n                    fontSize = 16.sp,\r\n                    fontWeight = FontWeight.Bold,\r\n                    color = MaterialTheme.colorScheme.primary\r\n                )\r\n                \r\n                // í• ì¸ìœ¨ (ìˆëŠ” ê²½ìš°)\r\n                deal.discountRate?.let { discount ->\r\n                    Text(\r\n                        text = \"${discount}% í• ì¸\",\r\n                        fontSize = 12.sp,\r\n                        color = Color.Red,\r\n                        fontWeight = FontWeight.Medium\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun InlineScoreBadge(score: Int) {\r\n    Surface(\r\n        modifier = Modifier,\r\n        shape = RoundedCornerShape(12.dp),\r\n        color = when {\r\n            score >= 90 -> Color(0xFFFF6B6B)\r\n            score >= 70 -> Color(0xFFFFB347)\r\n            else -> Color(0xFF95A5A6)\r\n        }\r\n    ) {\r\n        Text(\r\n            text = \"\uD83D\uDD25 $score\",\r\n            color = Color.White,\r\n            fontSize = 10.sp,\r\n            fontWeight = FontWeight.Bold,\r\n            modifier = Modifier.padding(horizontal = 6.dp, vertical = 2.dp)\r\n        )\r\n    }\r\n}\r\n\r\n@Composable\r\nprivate fun SearchEmptyState(query: String) {\r\n    Column(\r\n        modifier = Modifier\r\n            .fillMaxSize()\r\n            .padding(32.dp),\r\n        horizontalAlignment = Alignment.CenterHorizontally,\r\n        verticalAlignment = Alignment.CenterVertically\r\n    ) {\r\n        Icon(\r\n            Icons.Default.SearchOff,\r\n            contentDescription = null,\r\n            modifier = Modifier.size(64.dp),\r\n            tint = MaterialTheme.colorScheme.onSurfaceVariant\r\n        )\r\n        \r\n        Spacer(modifier = Modifier.height(16.dp))\r\n        \r\n        Text(\r\n            text = \"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤\",\r\n            fontSize = 18.sp,\r\n            fontWeight = FontWeight.Medium,\r\n            textAlign = TextAlign.Center\r\n        )\r\n        \r\n        Text(\r\n            text = \"\\\"$query\\\"ì— ëŒ€í•œ í•«ë”œì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”\",\r\n            fontSize = 14.sp,\r\n            color = MaterialTheme.colorScheme.onSurfaceVariant,\r\n            textAlign = TextAlign.Center,\r\n            modifier = Modifier.padding(top = 8.dp)\r\n        )\r\n        \r\n        Spacer(modifier = Modifier.height(24.dp))\r\n        \r\n        Text(\r\n            text = \"\uD83D\uDCA1 ê²€ìƒ‰ íŒ:\\nâ€¢ ë” ê°„ë‹¨í•œ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”\\nâ€¢ ë¸Œëœë“œëª…ì´ë‚˜ ì¹´í…Œê³ ë¦¬ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”\\nâ€¢ í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”\",\r\n            fontSize = 14.sp,\r\n            color = MaterialTheme.colorScheme.onSurfaceVariant,\r\n            textAlign = TextAlign.Center,\r\n            lineHeight = 20.sp\r\n        )\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/ddaeany0919/insightdeal/AdvancedSearchScreen.kt b/app/src/main/java/com/ddaeany0919/insightdeal/AdvancedSearchScreen.kt
--- a/app/src/main/java/com/ddaeany0919/insightdeal/AdvancedSearchScreen.kt	(revision 06774c5d93972d5d930684fe83fe4009ea741442)
+++ b/app/src/main/java/com/ddaeany0919/insightdeal/AdvancedSearchScreen.kt	(date 1761318227225)
@@ -44,16 +44,16 @@
     val activeFilters by viewModel.activeFilters.collectAsState()
     val popularKeywords by viewModel.popularKeywords.collectAsState()
     val isLoading by viewModel.isLoading.collectAsState()
-    
+
     var showFilters by remember { mutableStateOf(false) }
     val focusRequester = remember { FocusRequester() }
     val keyboardController = LocalSoftwareKeyboardController.current
-    
+
     LaunchedEffect(Unit) {
         viewModel.loadPopularKeywords()
         focusRequester.requestFocus()
     }
-    
+
     Scaffold(
         topBar = {
             TopAppBar(
@@ -80,8 +80,8 @@
                         Icon(
                             Icons.Default.FilterList,
                             contentDescription = "í•„í„°",
-                            tint = if (showFilters) MaterialTheme.colorScheme.primary 
-                                  else MaterialTheme.colorScheme.onSurface
+                            tint = if (showFilters) MaterialTheme.colorScheme.primary
+                            else MaterialTheme.colorScheme.onSurface
                         )
                     }
                 }
@@ -105,7 +105,7 @@
                 },
                 focusRequester = focusRequester
             )
-            
+
             // ğŸ¯ í•„í„° ì˜ì—­ (ì ‘ì„ ìˆ˜ ìˆìŒ)
             AnimatedVisibility(
                 visible = showFilters,
@@ -118,7 +118,7 @@
                     onClearFilters = viewModel::clearAllFilters
                 )
             }
-            
+
             // ğŸ”¥ ì¸ê¸° ê²€ìƒ‰ì–´ (ê²€ìƒ‰ì–´ ì—†ì„ ë•Œë§Œ í‘œì‹œ)
             if (searchQuery.isEmpty() && searchResults.isEmpty()) {
                 PopularKeywordsSection(
@@ -126,7 +126,7 @@
                     onKeywordClick = viewModel::selectSuggestion
                 )
             }
-            
+
             // ğŸ“± ê²€ìƒ‰ ê²°ê³¼ ì˜ì—­
             when {
                 isLoading -> {
@@ -140,9 +140,9 @@
                             CircularProgressIndicator(
                                 color = MaterialTheme.colorScheme.primary
                             )
-                            
+
                             Spacer(modifier = Modifier.height(16.dp))
-                            
+
                             Text(
                                 text = "ğŸ” ê²€ìƒ‰ ì¤‘...",
                                 fontSize = 16.sp,
@@ -151,11 +151,11 @@
                         }
                     }
                 }
-                
+
                 searchResults.isEmpty() && searchQuery.isNotEmpty() -> {
                     SearchEmptyState(searchQuery)
                 }
-                
+
                 else -> {
                     SearchResultsList(
                         results = searchResults,
@@ -218,7 +218,7 @@
             singleLine = true,
             shape = RoundedCornerShape(12.dp)
         )
-        
+
         // ğŸ’¡ ê²€ìƒ‰ ìë™ì™„ì„± (ë“œë¡­ë‹¤ìš´)
         AnimatedVisibility(
             visible = suggestions.isNotEmpty() && searchQuery.isNotEmpty(),
@@ -266,16 +266,16 @@
             modifier = Modifier.size(18.dp),
             tint = MaterialTheme.colorScheme.onSurfaceVariant
         )
-        
+
         Spacer(modifier = Modifier.width(12.dp))
-        
+
         // ê²€ìƒ‰ì–´ í•˜ì´ë¼ì´íŒ…
         Text(
             text = suggestion,
             fontSize = 14.sp,
             modifier = Modifier.weight(1f)
         )
-        
+
         Icon(
             Icons.Default.NorthWest,
             contentDescription = null,
@@ -310,16 +310,16 @@
                     fontSize = 16.sp,
                     fontWeight = FontWeight.Bold
                 )
-                
+
                 if (activeFilters.values.any { it.isNotEmpty() }) {
                     TextButton(onClick = onClearFilters) {
                         Text("ì „ì²´ í•´ì œ")
                     }
                 }
             }
-            
+
             Spacer(modifier = Modifier.height(12.dp))
-            
+
             // ê°€ê²©ëŒ€ í•„í„°
             FilterGroup(
                 title = "ğŸ’° ê°€ê²©ëŒ€",
@@ -327,9 +327,9 @@
                 selectedOptions = activeFilters["price"] ?: emptySet(),
                 onToggle = { option -> onFilterToggle("price", option) }
             )
-            
+
             Spacer(modifier = Modifier.height(16.dp))
-            
+
             // í• ì¸ìœ¨ í•„í„°  
             FilterGroup(
                 title = "ğŸ”¥ í• ì¸ìœ¨",
@@ -337,9 +337,9 @@
                 selectedOptions = activeFilters["discount"] ?: emptySet(),
                 onToggle = { option -> onFilterToggle("discount", option) }
             )
-            
+
             Spacer(modifier = Modifier.height(16.dp))
-            
+
             // ì¹´í…Œê³ ë¦¬ í•„í„°
             FilterGroup(
                 title = "ğŸ“± ì¹´í…Œê³ ë¦¬",
@@ -347,9 +347,9 @@
                 selectedOptions = activeFilters["category"] ?: emptySet(),
                 onToggle = { option -> onFilterToggle("category", option) }
             )
-            
+
             Spacer(modifier = Modifier.height(16.dp))
-            
+
             // ì‚¬ì´íŠ¸ í•„í„° (ìš°ì„ ìˆœìœ„ ë°˜ì˜)
             FilterGroup(
                 title = "ğŸŒ ì»¤ë®¤ë‹ˆí‹°",
@@ -375,7 +375,7 @@
             fontWeight = FontWeight.Medium,
             modifier = Modifier.padding(bottom = 8.dp)
         )
-        
+
         LazyRow(
             horizontalArrangement = Arrangement.spacedBy(8.dp)
         ) {
@@ -412,16 +412,16 @@
                 modifier = Modifier.size(20.dp),
                 tint = MaterialTheme.colorScheme.primary
             )
-            
+
             Spacer(modifier = Modifier.width(8.dp))
-            
+
             Text(
                 text = "ğŸ”¥ ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´",
                 fontSize = 16.sp,
                 fontWeight = FontWeight.Bold
             )
         }
-        
+
         LazyRow(
             horizontalArrangement = Arrangement.spacedBy(8.dp)
         ) {
@@ -465,10 +465,10 @@
                     fontSize = 16.sp,
                     fontWeight = FontWeight.Medium
                 )
-                
+
                 // ì •ë ¬ ì˜µì…˜
                 var showSortMenu by remember { mutableStateOf(false) }
-                
+
                 TextButton(
                     onClick = { showSortMenu = true }
                 ) {
@@ -479,36 +479,36 @@
                         modifier = Modifier.size(16.dp)
                     )
                 }
-                
+
                 DropdownMenu(
                     expanded = showSortMenu,
                     onDismissRequest = { showSortMenu = false }
                 ) {
                     DropdownMenuItem(
                         text = { Text("ìµœì‹ ìˆœ") },
-                        onClick = { 
+                        onClick = {
                             // viewModel.setSortOrder(SortOrder.LATEST)
-                            showSortMenu = false 
+                            showSortMenu = false
                         }
                     )
                     DropdownMenuItem(
                         text = { Text("ì¸ê¸°ìˆœ") },
-                        onClick = { 
+                        onClick = {
                             // viewModel.setSortOrder(SortOrder.POPULAR)
-                            showSortMenu = false 
+                            showSortMenu = false
                         }
                     )
                     DropdownMenuItem(
                         text = { Text("í• ì¸ìœ¨ìˆœ") },
-                        onClick = { 
+                        onClick = {
                             // viewModel.setSortOrder(SortOrder.DISCOUNT)
-                            showSortMenu = false 
+                            showSortMenu = false
                         }
                     )
                 }
             }
         }
-        
+
         items(results) { deal ->
             SearchResultItem(
                 deal = deal,
@@ -546,9 +546,9 @@
                     .clip(RoundedCornerShape(8.dp))
                     .background(MaterialTheme.colorScheme.surfaceVariant)
             )
-            
+
             Spacer(modifier = Modifier.width(12.dp))
-            
+
             // ìƒí’ˆ ì •ë³´
             Column(
                 modifier = Modifier.weight(1f)
@@ -565,12 +565,12 @@
                         color = MaterialTheme.colorScheme.primary,
                         fontWeight = FontWeight.Medium
                     )
-                    
+
                     InlineScoreBadge(score = 85) // ì‹¤ì œë¡œëŠ” deal.qualityScore
                 }
-                
+
                 Spacer(modifier = Modifier.height(4.dp))
-                
+
                 // ìƒí’ˆëª… (í‚¤ì›Œë“œ í•˜ì´ë¼ì´íŒ…)
                 Text(
                     text = deal.title,
@@ -578,9 +578,9 @@
                     fontWeight = FontWeight.Medium,
                     maxLines = 2
                 )
-                
+
                 Spacer(modifier = Modifier.height(4.dp))
-                
+
                 // ê°€ê²© ì •ë³´
                 Text(
                     text = "${NumberFormat.getInstance().format(deal.price)}ì›",
@@ -588,7 +588,7 @@
                     fontWeight = FontWeight.Bold,
                     color = MaterialTheme.colorScheme.primary
                 )
-                
+
                 // í• ì¸ìœ¨ (ìˆëŠ” ê²½ìš°)
                 deal.discountRate?.let { discount ->
                     Text(
@@ -631,7 +631,7 @@
             .fillMaxSize()
             .padding(32.dp),
         horizontalAlignment = Alignment.CenterHorizontally,
-        verticalAlignment = Alignment.CenterVertically
+        verticalArrangement = Arrangement.Center
     ) {
         Icon(
             Icons.Default.SearchOff,
@@ -639,16 +639,16 @@
             modifier = Modifier.size(64.dp),
             tint = MaterialTheme.colorScheme.onSurfaceVariant
         )
-        
+
         Spacer(modifier = Modifier.height(16.dp))
-        
+
         Text(
             text = "ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤",
             fontSize = 18.sp,
             fontWeight = FontWeight.Medium,
             textAlign = TextAlign.Center
         )
-        
+
         Text(
             text = "\"$query\"ì— ëŒ€í•œ í•«ë”œì„ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”",
             fontSize = 14.sp,
@@ -656,9 +656,9 @@
             textAlign = TextAlign.Center,
             modifier = Modifier.padding(top = 8.dp)
         )
-        
+
         Spacer(modifier = Modifier.height(24.dp))
-        
+
         Text(
             text = "ğŸ’¡ ê²€ìƒ‰ íŒ:\nâ€¢ ë” ê°„ë‹¨í•œ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”\nâ€¢ ë¸Œëœë“œëª…ì´ë‚˜ ì¹´í…Œê³ ë¦¬ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”\nâ€¢ í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”",
             fontSize = 14.sp,
